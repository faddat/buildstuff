{
  "builders": [
    {
      "type": "googlecompute",
      "account_file": "/home/faddat/Desktop/account.json",
      "project_id": "resonant-truth-120806",
      "source_image": "debian-8-jessie-v20160301",
      "zone": "asia-east1-c",
      "disk_size": "25",
      "name": "klouds-server-gce",
      "image_name": "server-{{timestamp}}"
    },
    {
      "type": "qemu",
      "name": "klouds-server-qemu-{{timestamp}}",
      "ssh_wait_timeout": "15m",
      "format": "qcow2",
      "accelerator": "kvm",
      "net_device": "virtio-net",
      "disk_cache": "none",
      "disk_interface": "virtio",
      "headless": "false",
      "disk_size": "10140",
      "qemuargs": [
        [
          "-m",
          "2048M"
        ],
        [
          "-smp",
          "2"
        ]
      ],
      "iso_url": "/home/faddat/Desktop/debian-8.3.0-amd64-netinst.iso",
      "iso_checksum_url": "http://cdimage.debian.org/debian-cd/8.3.0/amd64/bt-cd/SHA512SUMS",
      "iso_checksum_type": "sha512",
      "http_directory": "http",
      "ssh_username": "klouds",
      "ssh_password": "klouds",
      "shutdown_command": "echo 'klouds'|sudo -S shutdown -h now",
      "boot_wait": "5s",
      "boot_command": [
        "<esc><wait>",
        "install <wait>",
        "preseed/url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/vanilla-debian-8-jessie-preseed.cfg <wait>",
        "debian-installer=en_US <wait>",
        "auto <wait>",
        "locale=en_US <wait>",
        "kbd-chooser/method=us <wait>",
        "netcfg/get_hostname=leaflet <wait>",
        "netcfg/get_domain=klouds.org <wait>",
        "fb=false <wait>",
        "debconf/frontend=noninteractive <wait>",
        "console-setup/ask_detect=false <wait>",
        "console-keymaps-at/keymap=us <wait>",
        "keyboard-configuration/xkb-keymap=us <wait>",
        "<enter><wait>"
      ]
    },
    {
      "type": "vmware-iso",
      "output_directory": "output-vmware-{{timestamp}}",
      "disk_size": "10140",
      "guest_os_type": "debian8-64",
      "http_directory": "http",
      "iso_checksum_url": "http://cdimage.debian.org/debian-cd/8.3.0/amd64/bt-cd/SHA512SUMS",
      "iso_checksum_type": "sha512",
      "iso_url": "/home/faddat/Desktop/debian-8.3.0-amd64-netinst.iso",
      "ssh_password": "klouds",
      "ssh_port": "22",
      "ssh_username": "klouds",
      "ssh_wait_timeout": "10000s",
      "tools_upload_flavor": "linux",
      "vmx_data": {
        "cpuid.coresPerSocket": "1",
        "memsize": "2048",
        "numvcpus": "2"
      },
      "boot_command": [
        "<esc><wait>",
        "install <wait>",
        "preseed/url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/preseed.cfg <wait>",
        "debian-installer=en_GB <wait>",
        "auto <wait>",
        "locale=en_GB <wait>",
        "kbd-chooser/method=us <wait>",
        "netcfg/get_hostname=leaflet <wait>",
        "netcfg/get_domain=klouds.org <wait>",
        "fb=false <wait>",
        "debconf/frontend=noninteractive <wait>",
        "console-setup/ask_detect=false <wait>",
        "console-keymaps-at/keymap=gb <wait>",
        "keyboard-configuration/xkb-keymap=gb <wait>",
        "<enter><wait>"
      ]
    }
  ],
    "provisioners": [
    {
    "type": "shell",
    "script": "scripts/setup-server.sh"
    }
    ]

}
